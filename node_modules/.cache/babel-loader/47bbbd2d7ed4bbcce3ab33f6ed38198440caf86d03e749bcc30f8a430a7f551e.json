{"ast":null,"code":"import React,{useEffect,useRef,useState}from'react';import{jsxs as _jsxs,jsx as _jsx}from\"react/jsx-runtime\";export default function TradingViewWidget(_ref){let{symbol=\"NSE:RELIANCE\",onSymbolChange}=_ref;const containerRef=useRef(null);const[currentSymbol,setCurrentSymbol]=useState(symbol);useEffect(()=>{if(containerRef.current)containerRef.current.innerHTML='';const loadScript=()=>{return new Promise(resolve=>{if(window.TradingView)return resolve();const script=document.createElement('script');script.src='https://s3.tradingview.com/tv.js';script.async=true;script.onload=resolve;document.head.appendChild(script);});};loadScript().then(()=>{if(containerRef.current&&window.TradingView){new window.TradingView.widget({width:\"100%\",height:\"100%\",symbol:currentSymbol,interval:\"D\",timezone:\"Asia/Kolkata\",theme:\"dark\",style:\"1\",locale:\"en\",toolbar_bg:\"#1E293B\",enable_publishing:false,allow_symbol_change:true,container_id:containerRef.current.id,hide_side_toolbar:false,studies:[\"MACD@tv-basicstudies\"],withdateranges:true,autosize:true,onSymbolChanged:symbolInfo=>{setCurrentSymbol(symbolInfo.name);if(onSymbolChange)onSymbolChange(symbolInfo.name);}});}});},[currentSymbol]);const handleSymbolChange=newSymbol=>{setCurrentSymbol(newSymbol);if(onSymbolChange)onSymbolChange(newSymbol);};return/*#__PURE__*/_jsxs(\"div\",{className:\"widget trading-chart\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"widget-header\",children:[/*#__PURE__*/_jsxs(\"h3\",{children:[currentSymbol,\" Live Chart\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"symbol-selector\",children:/*#__PURE__*/_jsxs(\"select\",{value:currentSymbol,onChange:e=>handleSymbolChange(e.target.value),className:\"symbol-dropdown\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"NSE:RELIANCE\",children:\"Reliance Industries\"}),/*#__PURE__*/_jsx(\"option\",{value:\"NSE:TCS\",children:\"TCS\"}),/*#__PURE__*/_jsx(\"option\",{value:\"NSE:HDFCBANK\",children:\"HDFC Bank\"}),/*#__PURE__*/_jsx(\"option\",{value:\"NSE:INFY\",children:\"Infosys\"}),/*#__PURE__*/_jsx(\"option\",{value:\"NSE:ICICIBANK\",children:\"ICICI Bank\"}),/*#__PURE__*/_jsx(\"option\",{value:\"NSE:LT\",children:\"L&T\"}),/*#__PURE__*/_jsx(\"option\",{value:\"NSE:TITAN\",children:\"Titan\"})]})})]}),/*#__PURE__*/_jsx(\"div\",{ref:containerRef,id:\"tradingview_\".concat(Math.random().toString(36).substr(2,9)),style:{width:'100%',height:'calc(100% - 60px)',minHeight:'400px'}})]});}","map":{"version":3,"names":["React","useEffect","useRef","useState","jsxs","_jsxs","jsx","_jsx","TradingViewWidget","_ref","symbol","onSymbolChange","containerRef","currentSymbol","setCurrentSymbol","current","innerHTML","loadScript","Promise","resolve","window","TradingView","script","document","createElement","src","async","onload","head","appendChild","then","widget","width","height","interval","timezone","theme","style","locale","toolbar_bg","enable_publishing","allow_symbol_change","container_id","id","hide_side_toolbar","studies","withdateranges","autosize","onSymbolChanged","symbolInfo","name","handleSymbolChange","newSymbol","className","children","value","onChange","e","target","ref","concat","Math","random","toString","substr","minHeight"],"sources":["C:/Dev/fintech/src/components/TradingViewWidget.jsx"],"sourcesContent":["import React, { useEffect, useRef, useState } from 'react';\r\n\r\nexport default function TradingViewWidget({ symbol = \"NSE:RELIANCE\", onSymbolChange }) {\r\n  const containerRef = useRef(null);\r\n  const [currentSymbol, setCurrentSymbol] = useState(symbol);\r\n\r\n  useEffect(() => {\r\n    if (containerRef.current) containerRef.current.innerHTML = '';\r\n    \r\n    const loadScript = () => {\r\n      return new Promise((resolve) => {\r\n        if (window.TradingView) return resolve();\r\n        const script = document.createElement('script');\r\n        script.src = 'https://s3.tradingview.com/tv.js';\r\n        script.async = true;\r\n        script.onload = resolve;\r\n        document.head.appendChild(script);\r\n      });\r\n    };\r\n\r\n    loadScript().then(() => {\r\n      if (containerRef.current && window.TradingView) {\r\n        new window.TradingView.widget({\r\n          width: \"100%\",\r\n          height: \"100%\",\r\n          symbol: currentSymbol,\r\n          interval: \"D\",\r\n          timezone: \"Asia/Kolkata\",\r\n          theme: \"dark\",\r\n          style: \"1\",\r\n          locale: \"en\",\r\n          toolbar_bg: \"#1E293B\",\r\n          enable_publishing: false,\r\n          allow_symbol_change: true,\r\n          container_id: containerRef.current.id,\r\n          hide_side_toolbar: false,\r\n          studies: [\"MACD@tv-basicstudies\"],\r\n          withdateranges: true,\r\n          autosize: true,\r\n          onSymbolChanged: (symbolInfo) => {\r\n            setCurrentSymbol(symbolInfo.name);\r\n            if (onSymbolChange) onSymbolChange(symbolInfo.name);\r\n          }\r\n        });\r\n      }\r\n    });\r\n  }, [currentSymbol]);\r\n\r\n  const handleSymbolChange = (newSymbol) => {\r\n    setCurrentSymbol(newSymbol);\r\n    if (onSymbolChange) onSymbolChange(newSymbol);\r\n  };\r\n\r\n  return (\r\n    <div className=\"widget trading-chart\">\r\n      <div className=\"widget-header\">\r\n        <h3>{currentSymbol} Live Chart</h3>\r\n        <div className=\"symbol-selector\">\r\n          <select \r\n            value={currentSymbol} \r\n            onChange={(e) => handleSymbolChange(e.target.value)}\r\n            className=\"symbol-dropdown\"\r\n          >\r\n            <option value=\"NSE:RELIANCE\">Reliance Industries</option>\r\n            <option value=\"NSE:TCS\">TCS</option>\r\n            <option value=\"NSE:HDFCBANK\">HDFC Bank</option>\r\n            <option value=\"NSE:INFY\">Infosys</option>\r\n            <option value=\"NSE:ICICIBANK\">ICICI Bank</option>\r\n            <option value=\"NSE:LT\">L&T</option>\r\n            <option value=\"NSE:TITAN\">Titan</option>\r\n          </select>\r\n        </div>\r\n      </div>\r\n      <div \r\n        ref={containerRef}\r\n        id={`tradingview_${Math.random().toString(36).substr(2, 9)}`}\r\n        style={{ width: '100%', height: 'calc(100% - 60px)', minHeight: '400px' }}\r\n      />\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}