{"ast":null,"code":"import React,{useState}from'react';import{usePersonalizationContext}from'../../context/PersonalizationContext';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function VoiceAssistant(){const[isListening,setIsListening]=useState(false);const[transcript,setTranscript]=useState('');const[response,setResponse]=useState('');const{updateProfile,userProfile}=usePersonalizationContext();// Enhanced command processing function\nconst processCommand=command=>{const lowerCommand=command.toLowerCase().trim();console.log('Processing command:',lowerCommand);// Debug log\n// Chart related commands\nif(lowerCommand.includes('show')&&(lowerCommand.includes('nifty')||lowerCommand.includes('chart'))){setResponse('âœ… Displaying NIFTY 50 chart with technical indicators...');return;}// Profile switching commands\nif(lowerCommand.includes('day trader')||lowerCommand.includes('day trading')){updateProfile({type:'dayTrader'});setResponse('âœ… Switched to Day Trader layout with order book and real-time data.');return;}if(lowerCommand.includes('investor')||lowerCommand.includes('long term')){updateProfile({type:'investor'});setResponse('âœ… Switched to Long-Term Investor layout with fundamentals.');return;}// Stock analysis commands\nif(lowerCommand.includes('undervalued')||lowerCommand.includes('value stocks')){setResponse('ðŸ“Š Scanning for undervalued stocks: TITAN (P/E: 24.5), HDFC Bank (P/E: 18.2), TCS (P/E: 28.1) show strong fundamentals with institutional buying...');return;}// Market sentiment commands\nif(lowerCommand.includes('market sentiment')||lowerCommand.includes('sentiment')){setResponse('ðŸ“ˆ Current market sentiment: Bullish (67%). Banking sector leading gains (+2.4%), tech sector mixed. NIFTY resistance at 25,200.');return;}// Clear/reset commands\nif(lowerCommand.includes('clear')||lowerCommand.includes('reset')){setTranscript('');setResponse('');return;}// Default response\nsetResponse('â“ Try: \"Show NIFTY chart\", \"Switch to day trader\", \"Find undervalued stocks\", \"Market sentiment\", or \"Clear\"');};const handleVoiceClick=()=>{if(!isListening){setIsListening(true);setTranscript('ðŸŽ¤ Listening...');setResponse('');// Enhanced Web Speech API setup\nif('webkitSpeechRecognition'in window||'SpeechRecognition'in window){const SpeechRecognition=window.SpeechRecognition||window.webkitSpeechRecognition;const recognition=new SpeechRecognition();recognition.continuous=false;recognition.interimResults=false;recognition.lang='en-US';recognition.maxAlternatives=1;recognition.onstart=()=>{console.log('Speech recognition started');};recognition.onresult=event=>{const spokenText=event.results[0][0].transcript;const confidence=event.results[0][0].confidence;console.log('Recognized:',spokenText,'Confidence:',confidence);setTranscript(\"\\\"\".concat(spokenText,\"\\\"\"));processCommand(spokenText);setIsListening(false);};recognition.onerror=event=>{console.error('Speech recognition error:',event.error);setTranscript('âŒ Sorry, I couldn\\'t understand that. Please try again.');setResponse('');setIsListening(false);};recognition.onend=()=>{console.log('Speech recognition ended');setIsListening(false);};recognition.start();}else{// Enhanced fallback with realistic simulation\nsetTimeout(()=>{const simulatedCommands=['Show me NIFTY 50 chart','Find undervalued stocks','Switch to day trader layout','What is market sentiment today'];const randomCommand=simulatedCommands[Math.floor(Math.random()*simulatedCommands.length)];setTranscript(\"\\\"\".concat(randomCommand,\"\\\" (Simulated)\"));processCommand(randomCommand);setIsListening(false);},2000);}}};return/*#__PURE__*/_jsxs(\"div\",{className:\"widget voice-assistant\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"widget-header\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"\\uD83E\\uDD16 AI Trading Assistant\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"profile-indicator\",children:[\"Profile: \",userProfile.type]})]}),/*#__PURE__*/_jsx(\"button\",{className:\"voice-button \".concat(isListening?'listening':''),onClick:handleVoiceClick,disabled:isListening,children:isListening?'ðŸ”´ Listening...':'ðŸŽ¤ Click to Speak'}),transcript&&/*#__PURE__*/_jsxs(\"div\",{className:\"transcript\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"You said:\"}),\" \",transcript]}),response&&/*#__PURE__*/_jsxs(\"div\",{className:\"ai-response\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"AI Response:\"}),\" \",response]}),/*#__PURE__*/_jsxs(\"div\",{className:\"suggested-commands\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"commands-label\",children:\"\\uD83D\\uDCA1 Try saying:\"}),/*#__PURE__*/_jsxs(\"ul\",{children:[/*#__PURE__*/_jsx(\"li\",{children:\"\\\"Show NIFTY chart\\\"\"}),/*#__PURE__*/_jsx(\"li\",{children:\"\\\"Find undervalued stocks\\\"\"}),/*#__PURE__*/_jsx(\"li\",{children:\"\\\"Switch to day trader\\\"\"}),/*#__PURE__*/_jsx(\"li\",{children:\"\\\"Market sentiment\\\"\"}),/*#__PURE__*/_jsx(\"li\",{children:\"\\\"Clear\\\" (to reset)\"})]})]})]});}","map":{"version":3,"names":["React","useState","usePersonalizationContext","jsx","_jsx","jsxs","_jsxs","VoiceAssistant","isListening","setIsListening","transcript","setTranscript","response","setResponse","updateProfile","userProfile","processCommand","command","lowerCommand","toLowerCase","trim","console","log","includes","type","handleVoiceClick","window","SpeechRecognition","webkitSpeechRecognition","recognition","continuous","interimResults","lang","maxAlternatives","onstart","onresult","event","spokenText","results","confidence","concat","onerror","error","onend","start","setTimeout","simulatedCommands","randomCommand","Math","floor","random","length","className","children","onClick","disabled"],"sources":["C:/Dev/fintech/src/components/AI/VoiceAssistant.jsx"],"sourcesContent":["import React, { useState } from 'react';\r\nimport { usePersonalizationContext } from '../../context/PersonalizationContext';\r\n\r\nexport default function VoiceAssistant() {\r\n  const [isListening, setIsListening] = useState(false);\r\n  const [transcript, setTranscript] = useState('');\r\n  const [response, setResponse] = useState('');\r\n  const { updateProfile, userProfile } = usePersonalizationContext();\r\n\r\n  // Enhanced command processing function\r\n  const processCommand = (command) => {\r\n    const lowerCommand = command.toLowerCase().trim();\r\n    console.log('Processing command:', lowerCommand); // Debug log\r\n    \r\n    // Chart related commands\r\n    if (lowerCommand.includes('show') && (lowerCommand.includes('nifty') || lowerCommand.includes('chart'))) {\r\n      setResponse('âœ… Displaying NIFTY 50 chart with technical indicators...');\r\n      return;\r\n    }\r\n    \r\n    // Profile switching commands\r\n    if (lowerCommand.includes('day trader') || lowerCommand.includes('day trading')) {\r\n      updateProfile({ type: 'dayTrader' });\r\n      setResponse('âœ… Switched to Day Trader layout with order book and real-time data.');\r\n      return;\r\n    }\r\n    \r\n    if (lowerCommand.includes('investor') || lowerCommand.includes('long term')) {\r\n      updateProfile({ type: 'investor' });\r\n      setResponse('âœ… Switched to Long-Term Investor layout with fundamentals.');\r\n      return;\r\n    }\r\n    \r\n    // Stock analysis commands\r\n    if (lowerCommand.includes('undervalued') || lowerCommand.includes('value stocks')) {\r\n      setResponse('ðŸ“Š Scanning for undervalued stocks: TITAN (P/E: 24.5), HDFC Bank (P/E: 18.2), TCS (P/E: 28.1) show strong fundamentals with institutional buying...');\r\n      return;\r\n    }\r\n    \r\n    // Market sentiment commands\r\n    if (lowerCommand.includes('market sentiment') || lowerCommand.includes('sentiment')) {\r\n      setResponse('ðŸ“ˆ Current market sentiment: Bullish (67%). Banking sector leading gains (+2.4%), tech sector mixed. NIFTY resistance at 25,200.');\r\n      return;\r\n    }\r\n    \r\n    // Clear/reset commands\r\n    if (lowerCommand.includes('clear') || lowerCommand.includes('reset')) {\r\n      setTranscript('');\r\n      setResponse('');\r\n      return;\r\n    }\r\n    \r\n    // Default response\r\n    setResponse('â“ Try: \"Show NIFTY chart\", \"Switch to day trader\", \"Find undervalued stocks\", \"Market sentiment\", or \"Clear\"');\r\n  };\r\n\r\n  const handleVoiceClick = () => {\r\n    if (!isListening) {\r\n      setIsListening(true);\r\n      setTranscript('ðŸŽ¤ Listening...');\r\n      setResponse('');\r\n      \r\n      // Enhanced Web Speech API setup\r\n      if ('webkitSpeechRecognition' in window || 'SpeechRecognition' in window) {\r\n        const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;\r\n        const recognition = new SpeechRecognition();\r\n        \r\n        recognition.continuous = false;\r\n        recognition.interimResults = false;\r\n        recognition.lang = 'en-US';\r\n        recognition.maxAlternatives = 1;\r\n        \r\n        recognition.onstart = () => {\r\n          console.log('Speech recognition started');\r\n        };\r\n        \r\n        recognition.onresult = (event) => {\r\n          const spokenText = event.results[0][0].transcript;\r\n          const confidence = event.results[0][0].confidence;\r\n          \r\n          console.log('Recognized:', spokenText, 'Confidence:', confidence);\r\n          \r\n          setTranscript(`\"${spokenText}\"`);\r\n          processCommand(spokenText);\r\n          setIsListening(false);\r\n        };\r\n        \r\n        recognition.onerror = (event) => {\r\n          console.error('Speech recognition error:', event.error);\r\n          setTranscript('âŒ Sorry, I couldn\\'t understand that. Please try again.');\r\n          setResponse('');\r\n          setIsListening(false);\r\n        };\r\n        \r\n        recognition.onend = () => {\r\n          console.log('Speech recognition ended');\r\n          setIsListening(false);\r\n        };\r\n        \r\n        recognition.start();\r\n      } else {\r\n        // Enhanced fallback with realistic simulation\r\n        setTimeout(() => {\r\n          const simulatedCommands = [\r\n            'Show me NIFTY 50 chart',\r\n            'Find undervalued stocks',\r\n            'Switch to day trader layout',\r\n            'What is market sentiment today'\r\n          ];\r\n          const randomCommand = simulatedCommands[Math.floor(Math.random() * simulatedCommands.length)];\r\n          setTranscript(`\"${randomCommand}\" (Simulated)`);\r\n          processCommand(randomCommand);\r\n          setIsListening(false);\r\n        }, 2000);\r\n      }\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"widget voice-assistant\">\r\n      <div className=\"widget-header\">\r\n        <h3>ðŸ¤– AI Trading Assistant</h3>\r\n        <span className=\"profile-indicator\">Profile: {userProfile.type}</span>\r\n      </div>\r\n      \r\n      <button \r\n        className={`voice-button ${isListening ? 'listening' : ''}`}\r\n        onClick={handleVoiceClick}\r\n        disabled={isListening}\r\n      >\r\n        {isListening ? 'ðŸ”´ Listening...' : 'ðŸŽ¤ Click to Speak'}\r\n      </button>\r\n      \r\n      {transcript && (\r\n        <div className=\"transcript\">\r\n          <strong>You said:</strong> {transcript}\r\n        </div>\r\n      )}\r\n      \r\n      {response && (\r\n        <div className=\"ai-response\">\r\n          <strong>AI Response:</strong> {response}\r\n        </div>\r\n      )}\r\n      \r\n      <div className=\"suggested-commands\">\r\n        <p className=\"commands-label\">ðŸ’¡ Try saying:</p>\r\n        <ul>\r\n          <li>\"Show NIFTY chart\"</li>\r\n          <li>\"Find undervalued stocks\"</li>\r\n          <li>\"Switch to day trader\"</li>\r\n          <li>\"Market sentiment\"</li>\r\n          <li>\"Clear\" (to reset)</li>\r\n        </ul>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}